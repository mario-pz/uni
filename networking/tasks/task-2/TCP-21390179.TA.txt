/*
Εργαστήριο Δίκτυα ΙΙ / TCP / 2023

Ονοματεπώνυμο: Μάριος Παπάζογλου
ΑΜ: 21390179

Τμήμα: ΤΑ
*/

***
Στοιχεία από εκφώνηση:
client: (IP:   192.168.1.102, TCP port: 1161)
server: gaia.cs.umass.edu(IP:  128.119.245.12, TCP port: 80)
****

Ερώτηση 1: Ο αριθμός αλληλουχίας που χρησιμοποιείται για την έναρξη της TCP σύνδεσης είναι το 0. Με βάση την είκονα, το SYN flag είναι set δηλαδή 1 επομένως το 
segment είναι SYN segment. 

Ερώτηση 2: Από την εικόνα βλέπω ότι το sequence number του segment SYN-ACK που στέλνεται από τον server στον client είναι 0. Η τιμή του acknowledged πεδίου SYN-ACK
είναι set δηλαδή 1 διότι ο server επιβεβαιώνει ότι έλαβε το SYN segment που έστειλε ο client. Τα flags που ενεργοποιούνται για δηλώσουν το segment απάντηση σαν 
SYN-ACK segment είναι το SYN flag και το ACK flag τα οποία και τα δύο είναι set στην εικόνα. 

Ερώτηση 3: Το sequence number του TCP segment που περιέχει την HTTP POST εντολή έχει την τιμή 1. 

Ερώτηση 4: Τα segments έχουν τα εξής νούμερα, ACKS και sequence numbers:
1o segment είναι το no.4 με ACK 6 και sequence number 1
2o segment είναι το no.5 με ACK 9 και sequence number 566
3o segment είναι το no.7 με ACK 12 και sequence number 2026
4o segment είναι το no.8 με ACK 14 και sequence number 3486
5o segment είναι το no.10 με ACK 15 και sequence number 4946
6o segment είναι το no.11 με ACK 16 και sequence number 6406

Παρακάτω είναι με τα RTTS. RTT = χρόνος αποδοχής - χρόνος αποστολής.
+---------+------------------+-----------------+----------+
| Segment | Χρόνος αποστολής | Χρόνος αποδοχής | RTT(sec) |
+---------+------------------+-----------------+----------+
|    1    |   	0.026477     |     0.053937    | 0.02746  |
|    2    |     0.041737     |     0.077294    | 0.035557 |
|    3    |     0.054026     |     0.124085    | 0.070059 |             
|    4    |     0.054690     |     0.169118    | 0.11443  |
|    5    |     0.077405     |     0.217299    | 0.13989  |
|    6    |     0.078157     |     0.267802    | 0.18964  |
+---------+------------------+-----------------+----------+

Ερώτηση 5: Το length του πρώτου segment είναι 565 bytes. Των επόμενων 5 segments είναι 1460 αφού τόσο είναι το MSS. 

Ερώτηση 6: Η ελάχιστη τιμή του buffer είναι το Window size και είναι ίσο με 5840 bytes το οποίο φαίνεται στο πρώτο SYN-ACK segment που στέλνει ο server. 
Η έλλειψη του receiver buffer δεν στραγγαλίζει τον αποστολέα. 

Ερώτηση 7: Δεν υπάρχουν segments που ξαναστάλθηκαν. Για να απαντήσω έλεγξα την γραφική παράσταση Time-Sequence-Graph(Stevens). 

Ερώτηση 8: Στο 1ο segment επιβεβαιώνονται 566 bytes. Σε όλα τα υπόλοιπα επιβεβαιώνονται 1460 bytes εκτός από 2. Το segment με no.79 επιβεβαιώνει 1147 bytes 
και με no.80 2920 bytes το οποίο είναι το διπλάσιο του 1460 άρα υπάρχουν περιπτώσεις που ο παραλήπτης επιβεβαίωσε segment παρά segment.

Ερώτηση 9: Τα συνολικά bytes που μεταφέρθηκαν είναι η διαφορά του sequence number του πρώτου TCP segment με το acknowledged number του τελευταίου ACK. Επομένως
με βάση το αρχείο tcp-wireshark-trace-1 το πρώτο segment είναι το no.4 και το τελευταίο το no.202 άρα 164091 - 1 = 164090 bytes. Ο συνολικός χρόνος μετάδωσης
υπολογίζεται με παρόμοιο τρόπο. Είναι η διαφορά του πρώτου χρόνου αποστολής με τον τελευταίπ χρόνο αποδοχής. Επομένως 5.455830 - 0.026477 = 5.4294. Άρα 
η ρυθμαπόδοση της TCP σύνδεσης είναι 164090/5.4294 = 30.222 byte/sec. 
